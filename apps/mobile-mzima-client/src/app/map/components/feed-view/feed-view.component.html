<div
  class="page-content ion-padding-horizontal"
  [ngClass]="{
    'at-bottom': atBottom,
    'at-top': atTop
  }"
>
  <app-select
    label="Sort by"
    [(ngModel)]="sorting"
    class="sorting-select"
    [options]="sortingOptions"
    [disabled]="isPostsLoading"
    (ngModelChange)="sortPosts()"
    [ngClass]="{ 'sorting-select--hidden': !atTop }"
  >
    <ng-container start>
      <app-icon name="sorting"></app-icon>
    </ng-container>
  </app-select>
  <ng-container *ngIf="posts.length; else emptyBox">
    <div class="total-posts">{{ totalPosts }} posts</div>
    <app-post-item
      *ngFor="let post of posts"
      [post]="post"
      (postDeleted)="handlePostDeleted($event)"
      (click)="showPost(post.id.toString())"
    ></app-post-item>

    <ion-infinite-scroll *ngIf="totalPosts > posts.length" (ionInfinite)="loadMorePosts($event)">
      <ion-infinite-scroll-content loadingSpinner="lines-sharp"></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ng-container>

  <app-menu class="menu" [ngClass]="{ 'menu--hidden': atBottom }"> </app-menu>
</div>

<ng-template #emptyBox>
  <div class="empty-box">
    <ion-text color="medium" class="empty ion-text-center" *ngIf="!posts.length && !isPostsLoading">
      There are no posts yet!
    </ion-text>
    <app-spinner *ngIf="isPostsLoading"></app-spinner>
  </div>
</ng-template>
