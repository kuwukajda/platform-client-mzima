<ion-content class="page ion-padding-vertical" [fullscreen]="true">
  <ion-title class="page-title ion-text-center ion-margin-bottom">Welcome back!</ion-title>
  <div class="main ion-padding-horizontal">
    <form class="form" novalidate [formGroup]="form" (ngSubmit)="login()">
      <div>
        <app-form-control
          type="email"
          label="Email"
          [required]="true"
          formControlName="email"
          placeholder="Enter your email"
        >
        </app-form-control>
        <app-form-control
          type="password"
          label="Passsword"
          [required]="true"
          [togglePassword]="true"
          formControlName="password"
          placeholder="Enter password"
        >
          <div class="forgot-password-button" button>
            <app-button
              (click)="openForgotPasswordModal()"
              fill="clear"
              expand="inline"
              size="small"
              >Forgot password?</app-button
            >
          </div>
        </app-form-control>
        <ion-text class="form-error ion-text-center" color="danger">
          Password or email is incorrect. Please, try again
        </ion-text>
      </div>

      <div class="bottom-panel">
        <app-button [disabled]="form.invalid || form.disabled">Log in</app-button>
      </div>
    </form>
  </div>
</ion-content>

<app-modal class="forgot-password-modal" [isOpen]="isForgotPasswordModalOpen">
  <div class="forgot-password-modal__header" header>
    <app-button
      fill="clear"
      color="custom"
      class="forgot-password-modal__back"
      (click)="isForgotPasswordModalOpen = false"
    >
      <app-icon name="arrow-back" slot="icon-only"></app-icon>
    </app-button>
    Password recovery
  </div>
  <div class="forgot-password-modal__info">
    <ion-text class="forgot-password-modal__title">Forgot your password?</ion-text>
    <p>No worries! Submit your email and check your inbox for a reset link.</p>
  </div>
  <form
    class="forgot-password-form"
    novalidate
    [formGroup]="forgotPasswordForm"
    (ngSubmit)="forgotPassword()"
  >
    <app-form-control
      type="email"
      label="Email"
      [required]="true"
      formControlName="email"
      placeholder="Enter your email"
    >
    </app-form-control>

    <div class="bottom-panel">
      <app-button [disabled]="forgotPasswordForm.invalid || forgotPasswordForm.disabled"
        >Reset password</app-button
      >
    </div>
  </form>
</app-modal>
